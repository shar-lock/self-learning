{"version":3,"sources":["api.js","set-global.js","create-fetcher.js","LandingPage.js","history.js","FoodCart.js","OrderManage.js","FoodManage.js","DeskManage.js","AddFood.js","RestaurantManage.js","Login.js","HomePage.js","OrderSuccess.js","App.js","serviceWorker.js","index.js"],"names":["api","axios","create","baseURL","window","_","f","cache","clearCache","read","args","key","join","then","val","fetcher","createFetcher","did","get","DeskInfo","info","data","title","name","withRouter","props","useState","custom","setCustom","rid","match","params","className","fallback","onClick","history","push","createHashHistory","imgStyle","float","width","height","border","menuItemStyle","padding","margin","MenuItem","food","onUpdate","amount","style","src","img","alt","desc","price","calcTotalPrice","cartAry","reduce","total","item","CartStatus","expand","setExpand","totalPrice","foods","position","bottom","left","right","backgroundColor","onPlaceOrder","defaultProps","FoodCart","cartChange","socket","emit","desk","foodChange","updated","produce","state","cart","idx","findIndex","it","id","splice","setState","placeOrder","console","log","post","deskName","deskInfo","customCount","count","res","pathname","foodMenu","this","io","path","query","on","order","close","map","currentAmount","currFoodCartItem","find","cartItem","Component","orderItemStyle","OrderItem","onDelete","orderInfo","setOrder","status","put","delete","OrderManage","orders","restaurant","unshift","length","objectFit","foodInfoStyle","overflow","cardStyle","FoodItem","foodInfo","setFoodInfo","isModify","setIsModify","category","foodProps","setFoodProps","change","e","target","value","imgChange","files","type","onChange","defaultValue","fd","FormData","append","FoodManage","setFoods","filter","useEffect","to","AddFood","onSubmit","preventDefault","userInfoFetcher","a","catch","RestaurantInfo","component","DeskManage","nameRef","useRef","passwordRef","captchaRef","current","password","captcha","alert","response","msg","ref","location","App","exact","HomePage","LandingPage","OrderSuccess","RestaurantManage","Login","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"ySAOeA,EALLC,IAAMC,OAAO,CACrBC,QAAS,S,kBCCXC,OAAOC,EAAIA,IACXD,OAAOJ,IAAMA,EACbI,OAAOH,MAAQA,I,0BCLA,WAASK,GACtB,IAAIC,EAAQ,GAEZ,MAAO,CACLC,WADK,WAEHD,EAAQ,IAEVE,KAJK,WAIU,IAAD,uBAANC,EAAM,yBAANA,EAAM,gBACZ,IAAIC,EAAMD,EAAKE,KAAK,KAEpB,GAAID,KAAOJ,EACT,OAAOA,EAAMI,GAEb,MAAML,EAAC,WAAD,EAAKI,GAAMG,MAAK,SAAAC,GACpBP,EAAMI,GAAOG,QCTnBC,G,OAAUC,GAAc,SAACC,GAC3B,OAAOjB,EAAIkB,IAAI,iBAAmBD,OAGpC,SAASE,EAAT,GAA0B,IAAPF,EAAM,EAANA,IACbG,EAAOL,EAAQN,KAAKQ,GAAKI,KAE7B,OACE,6BACE,8BAAOD,EAAKE,OADd,IAGE,8BAAOF,EAAKG,OAMHC,mBAAW,SAASC,GAAQ,IAAD,EACdC,mBAAS,GADK,mBACnCC,EADmC,KAC3BC,EAD2B,KAGpCC,EAAMJ,EAAMK,MAAMC,OAAOF,IACzBZ,EAAMQ,EAAMK,MAAMC,OAAOd,IAM7B,OACE,yBAAKe,UAAU,eACb,kBAAC,WAAD,CAAUC,SAAU,qFAClB,kBAACd,EAAD,CAAUF,IAAKA,KAEjB,8DACA,wBAAIe,UAAU,gBACZ,wBAAIA,UAAsB,IAAXL,EAAe,SAAW,KAAMO,QAAS,kBAAMN,EAAU,KAAxE,KACA,wBAAII,UAAsB,IAAXL,EAAe,SAAW,KAAMO,QAAS,kBAAMN,EAAU,KAAxE,KACA,wBAAII,UAAsB,IAAXL,EAAe,SAAW,KAAMO,QAAS,kBAAMN,EAAU,KAAxE,KACA,wBAAII,UAAsB,IAAXL,EAAe,SAAW,KAAMO,QAAS,kBAAMN,EAAU,KAAxE,MAGF,4BAAQM,QAjBZ,WACET,EAAMU,QAAQC,KAAd,aAAyBP,EAAzB,cAAkCZ,EAAlC,cAA2CU,MAgBzC,gC,gEC1CSQ,EAFCE,c,iBCSZC,G,OAAW,CACbC,MAAO,OACPC,MAAO,QACPC,OAAQ,QACRC,OAAQ,cAGNC,EAAgB,CAClBD,OAAQ,YACRE,QAAS,MACTC,OAAQ,OAGV,SAASC,EAAT,GAA6C,IAA1BC,EAAyB,EAAzBA,KAAMC,EAAmB,EAAnBA,SAAUC,EAAS,EAATA,OAgBjC,OACE,yBAAKC,MAAOP,GACV,4BAAKI,EAAKxB,MACV,6BACE,yBAAK2B,MAAOZ,EAAUa,IAAK,gCAAkCJ,EAAKK,IAAKC,IAAKN,EAAKxB,OACjF,2BAAIwB,EAAKO,MACT,2BAAIP,EAAKQ,QAEX,6BACE,4BAAQrB,QAtBd,WACiB,IAAXe,GAIJD,EAASD,EAAME,EAAS,KAiBpB,KACA,8BAAOA,GACP,4BAAQf,QAhBd,WAEEc,EAASD,EAAME,EAAS,KAcpB,OAgBR,SAASO,EAAeC,GACtB,OAAOA,EAAQC,QAAO,SAACC,EAAOC,GAC5B,OAAOD,EAAQC,EAAKX,OAASW,EAAKb,KAAKQ,QACtC,GAQL,SAASM,EAAWpC,GAAQ,IAAD,EACCC,oBAAS,GADV,mBACpBoC,EADoB,KACZC,EADY,KAGrBC,EAAaR,EAAe/B,EAAMwC,OAEtC,OACE,yBAAKf,MAAO,CACVgB,SAAU,QACVzB,OAAQ,OACR0B,OAAQ,MACRzB,OAAQ,YACR0B,KAAM,MACNC,MAAO,MACPC,gBAAiB,SAEhBR,EACC,4BAAQ5B,QAAS,kBAAM6B,GAAU,KAAjC,gBACA,4BAAQ7B,QAAS,kBAAM6B,GAAU,KAAjC,gBAEF,qDAAYC,GAEZ,4BAAQ9B,QAAS,kBAAMT,EAAM8C,iBAA7B,iBArCNzB,EAAS0B,aAAe,CACtBxB,SAAU,c,IAkDSyB,E,YACnB,WAAYhD,GAAQ,IAAD,8BACjB,4CAAMA,KAkERiD,WAAa,SAAC3B,EAAME,GAClB,IAAIlB,EAAS,EAAKN,MAAMK,MAAMC,OAC9B,EAAK4C,OAAOC,KAAK,WAAY,CAACC,KAAM,QAAU9C,EAAOd,IAAK8B,OAAME,YArE/C,EAwEnB6B,WAAa,SAAC/B,EAAME,GAClB,IAAI8B,EAAUC,YAAQ,EAAKC,MAAMC,MAAM,SAAAA,GACrC,IAAIC,EAAMD,EAAKE,WAAU,SAAAC,GAAE,OAAIA,EAAGtC,KAAKuC,KAAOvC,EAAKuC,MAE/CH,GAAO,EACM,IAAXlC,EACFiC,EAAKK,OAAOJ,EAAK,GAEjBD,EAAKC,GAAKlC,OAASA,EAGrBiC,EAAK9C,KAAK,CACRW,OACAE,cAIN,EAAKuC,SAAS,CAACN,KAAMH,KAzFJ,EA4FnBU,WAAa,WACXC,QAAQC,IAAI,gBACZ,IAAI5D,EAAS,EAAKN,MAAMK,MAAMC,OAO9B2D,QAAQC,IAAI5D,GACZ/B,EAAI4F,KAAJ,sBAAwB7D,EAAOF,IAA/B,iBAA2CE,EAAOd,IAAlD,UAA+D,CAC7D4E,SAAU,EAAKZ,MAAMa,SAASvE,KAC9BwE,YAAahE,EAAOiE,MACpBhC,WAAYR,EAAe,EAAKyB,MAAMC,MACtCjB,MAAO,EAAKgB,MAAMC,OACjBrE,MAAK,SAAAoF,GACN9D,EAAQC,KAAK,CACX8D,SAAS,MAAD,OAAQnE,EAAOF,IAAf,cAAwBE,EAAOd,IAA/B,kBACRgE,MAAOgB,EAAI5E,WA3Gf,EAAK4D,MAAQ,CACXC,KAAM,GACNiB,SAAU,GACVL,SAAU,IANK,E,iFAUE,IAAD,OACd/D,EAASqE,KAAK3E,MAAMK,MAAMC,OAE9B/B,EAAIkB,IAAI,iBAAmBa,EAAOd,KAAKJ,MAAK,SAAAC,GAC1C,EAAK0E,SAAS,CACZM,SAAUhF,EAAIO,UAIlBrB,EAAIkB,IAAI,sBAAsBL,MAAK,SAAAoF,GACjC,EAAKT,SAAS,CACZW,SAAUF,EAAI5E,UAKlB+E,KAAKzB,OAAS0B,IAAG,CACfC,KAAM,QACNC,MAAO,CACL1B,KAAM,QAAU9C,EAAOd,OAI3BmF,KAAKzB,OAAO6B,GAAG,WAAW,WACxBd,QAAQC,IAAI,cACZ,EAAKhB,OAAOC,KAAK,YAAa,QAAU7C,EAAOd,QAMjDmF,KAAKzB,OAAO6B,GAAG,aAAa,SAAApF,GAC1BsE,QAAQC,IAAI,YAAavE,GACzB,EAAKoE,SAASR,aAAQ,SAAAC,GAAU,IAAD,GAC7B,EAAAA,EAAMC,MAAK9C,KAAX,oBAAmBhB,WAKvBgF,KAAKzB,OAAO6B,GAAG,YAAY,SAAApF,GAEzBsE,QAAQC,IAAIvE,GACZ,EAAK0D,WAAW1D,EAAK2B,KAAM3B,EAAK6B,WAGlCmD,KAAKzB,OAAO6B,GAAG,sBAAsB,SAAAC,GACnCtE,EAAQC,KAAK,CACX8D,SAAS,MAAD,OAAQnE,EAAOF,IAAf,cAAwBE,EAAOd,IAA/B,kBACRgE,MAAOwB,S,6CAMXL,KAAKzB,OAAO+B,U,+BAmDJ,IAAD,OACP,OACE,6BACE,6BAEIN,KAAKnB,MAAMkB,SAASQ,KAAI,SAAA5D,GAEtB,IAAI6D,EAAgB,EAChBC,EAAmB,EAAK5B,MAAMC,KAAK4B,MAAK,SAAAC,GAAQ,OAAIA,EAAShE,KAAKuC,KAAOvC,EAAKuC,MAKlF,OAJIuB,IACFD,EAAgBC,EAAiB5D,QAG5B,kBAACH,EAAD,CAAUnC,IAAKoC,EAAKuC,GAAIvC,KAAMA,EAAME,OAAQ2D,EAAe5D,SAAU,EAAK0B,iBAIvF,kBAACb,EAAD,CAAYI,MAAOmC,KAAKnB,MAAMC,KAAMlC,SAAUoD,KAAK1B,WAAYH,aAAc6B,KAAKX,kB,GArIpDuB,a,imBC5GtC,IAAIC,EAAiB,CACnBvE,OAAQ,YACRG,OAAQ,MACRD,QAAS,OAGX,SAASsE,EAAT,GAAuC,IAAnBT,EAAkB,EAAlBA,MAAOU,EAAW,EAAXA,SAAW,EAERzF,mBAAS+E,GAFD,mBAE/BW,EAF+B,KAEpBC,EAFoB,KAgCpC,OACE,yBAAKnE,MAAO+D,GACV,4BAAKG,EAAUvB,UACf,uDAASuB,EAAUpD,YACnB,iDAAQoD,EAAUrB,aAClB,6DAAUqB,EAAUE,QACpB,6BACE,gDACA,4BAAQpF,QApCd,WACElC,EAAIuH,IAAJ,8BAA+Bd,EAAMnB,GAArC,WAAkD,CAChDgC,OAAQ,cACPzG,MAAK,WACNwG,EAAS,EAAD,GACHD,EADG,CAENE,OAAQ,oBA8BR,gBACA,4BAAQpF,QA1Bd,WACElC,EAAIuH,IAAJ,8BAA+Bd,EAAMnB,GAArC,WAAkD,CAChDgC,OAAQ,cACPzG,MAAK,WACNwG,EAAS,EAAD,GACHD,EADG,CAENE,OAAQ,oBAoBR,gBACA,4BAAQpF,QAhBd,WACElC,EAAIwH,OAAJ,8BAAkCf,EAAMnB,KAAMzE,MAAK,WACjDsG,EAASV,QAcP,kB,IAMagB,E,YACnB,WAAYhG,GAAQ,IAAD,8BACjB,4CAAMA,KAsCR0F,SAAW,SAACV,GACV,IAAItB,EAAM,EAAKF,MAAMyC,OAAOtC,WAAU,SAAAC,GAAE,OAAIA,EAAGC,KAAOmB,EAAMnB,MAE5D,EAAKE,SAASR,aAAQ,SAAAC,GACpBA,EAAMyC,OAAOnC,OAAOJ,EAAK,QAxC3B,EAAKF,MAAQ,CACXyC,OAAQ,IAJO,E,iFAQE,IAAD,OACd3F,EAASqE,KAAK3E,MAAMK,MAAMC,OAE9BqE,KAAKzB,OAAS0B,IAAG,CACfC,KAAM,cACNC,MAAO,CACLoB,WAAY,cAAgB5F,EAAOF,OAIvCuE,KAAKzB,OAAO6B,GAAG,WAAW,WACxB,EAAK7B,OAAOC,KAAK,kBAAmB,cAAgB7C,EAAOF,QAG7DuE,KAAKzB,OAAO6B,GAAG,aAAa,SAAAC,GAC1B,EAAKjB,SAASR,aAAQ,SAAAC,GACpBA,EAAMyC,OAAOE,QAAQnB,UAIzBzG,EAAIkB,IAAI,uBAAuBL,MAAK,SAAAoF,GAClC,EAAKT,SAASR,aAAQ,SAAAC,GACpBA,EAAMyC,OAASzB,EAAI5E,c,6CAMvB+E,KAAKzB,OAAO+B,U,+BAWJ,IAAD,OACP,OACE,6BACE,wDACA,6BACGN,KAAKnB,MAAMyC,OAAOG,OAAS,EAC1BzB,KAAKnB,MAAMyC,OAAOf,KAAI,SAAAF,GACpB,OAAO,kBAACS,EAAD,CAAWC,SAAU,EAAKA,SAAUxG,IAAK8F,EAAMnB,GAAImB,MAAOA,OAGnE,iD,GA1D6BO,a,yjBCtDzC,IAAI1E,EAAW,CACbC,MAAO,OACPG,OAAQ,YACRF,MAAO,QACPC,OAAQ,QACRqF,UAAW,SAETC,EAAgB,CAClBC,SAAU,UAERC,EAAY,CACdvF,OAAQ,YACRE,QAAS,MACTC,OAAQ,OAGV,SAASqF,EAAT,GAAqC,IAAlBnF,EAAiB,EAAjBA,KAAMoE,EAAW,EAAXA,SAAW,EACJzF,mBAASqB,GADL,mBAC7BoF,EAD6B,KACnBC,EADmB,OAEJ1G,oBAAS,GAFL,mBAE7B2G,EAF6B,KAEnBC,EAFmB,OAGF5G,mBAAS,CACvCH,KAAMwB,EAAKxB,KACX+B,KAAMP,EAAKO,KACXC,MAAOR,EAAKQ,MACZgF,SAAUxF,EAAKwF,SACfjB,OAAQvE,EAAKuE,OACblE,IAAK,OAT2B,mBAG7BoF,EAH6B,KAGlBC,EAHkB,KA2BlC,SAASC,EAAOC,GACdF,EAAa,KACRD,EADO,eAETG,EAAEC,OAAOrH,KAAOoH,EAAEC,OAAOC,SAI9B,SAASC,EAAUH,GACjBF,EAAa,KACRD,EADO,CAEVpF,IAAKuF,EAAEC,OAAOG,MAAM,MAqDxB,OACE,yBAAK7F,MAAO+E,GACV,4BAAKE,EAAS5G,MA3BZ8G,EAEA,6BACE,mDACK,2BAAOW,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAAS5G,KAAMA,KAAK,SAAQ,6BADpF,qBAEK,2BAAOyH,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAAS7E,KAAM/B,KAAK,SAAQ,6BAFpF,qBAGK,2BAAOyH,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAAS5E,MAAOhC,KAAK,UAAS,6BAHtF,qBAIK,2BAAOyH,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAASI,SAAUhH,KAAK,aAAY,6BAJ5F,qBAKK,2BAAOyH,KAAK,OAAOC,SAAUH,EAAWvH,KAAK,UAMpD,yBAAK2B,MAAO6E,GACV,yBAAK5E,IAAK,gCAAkCgF,EAAS/E,IAAKC,IAAK8E,EAAS5G,KAAM2B,MAAOZ,IACrF,gDAAO6F,EAAS7E,MAChB,gDAAO6E,EAAS5E,OAChB,gDAAO4E,EAASI,SAAWJ,EAASI,SAAW,+BAWnD,6BACE,4BAAQrG,QAAS,kBAAMoG,GAAY,KAAnC,gBAEA,4BAAQpG,QApFd,WACE,IAAIiH,EAAK,IAAIC,SAEb,IAAI,IAAIzI,KAAO6H,EAAW,CACxB,IAAI1H,EAAM0H,EAAU7H,GACpBwI,EAAGE,OAAO1I,EAAKG,GAGjBd,EAAIuH,IAAI,sBAAwBxE,EAAKuC,GAAI6D,GAAItI,MAAK,SAACsH,GACjDG,GAAY,GACZF,EAAYD,EAAS9G,WA0EnB,gBAEqB,OAApB8G,EAASb,QACR,4BAAQpF,QA7ChB,WACElC,EAAIuH,IAAI,sBAAwBxE,EAAKuC,GAArC,KACKkD,EADL,CAEElB,OAAQ,SACPzG,MAAK,SAAAoF,GACNmC,EAAYnC,EAAI5E,WAwCZ,gBAEmB,QAApB8G,EAASb,QACR,4BAAQpF,QAxDhB,WACElC,EAAIuH,IAAI,sBAAwBxE,EAAKuC,GAArC,KACKkD,EADL,CAEElB,OAAQ,QACPzG,MAAK,SAAAoF,GACNmC,EAAYnC,EAAI5E,WAmDZ,gBAEF,4BAAQa,QAhEd,WACElC,EAAIwH,OAAO,sBAAwBzE,EAAKuC,IAAIzE,MAAK,WAC/CsG,EAASpE,EAAKuC,SA8DZ,kBAQO,SAASgE,IAAc,IAAD,EACX5H,mBAAS,IADE,mBAC9BuC,EAD8B,KACvBsF,EADuB,KAWnC,SAASpC,EAAS7B,GAChBiE,EAAStF,EAAMuF,QAAO,SAAAnE,GAAE,OAAIA,EAAGC,KAAOA,MAGxC,OAZAmE,qBAAU,WACRzJ,EAAIkB,IAAI,sBAAsBL,MAAK,SAAAoF,GACjCsD,EAAStD,EAAI5E,WAEd,IAEHqE,QAAQC,IAAI1B,GAOV,6BACE,kBAAC,IAAD,CAAMyF,GAAG,oBAAT,4BACA,6BAEIzF,EAAM0C,KAAI,SAAA5D,GACR,OAAO,kBAACmF,EAAD,CAAUf,SAAUA,EAAUxG,IAAKoC,EAAKuC,GAAIvC,KAAMA,SCzJtD,iBACb,OAAO,6C,0jBCuDM4G,OAtDf,SAAiBlI,GAAQ,IAAD,EACQC,mBAAS,CACrCH,KAAM,GACN+B,KAAM,GACNC,MAAO,EACPgF,SAAU,GACVjB,OAAQ,KACRlE,IAAK,OAPe,mBACjB+E,EADiB,KACPC,EADO,KAUtB,SAASM,EAAOC,GACdP,EAAY,MACPD,EADM,eAERQ,EAAEC,OAAOrH,KAAOoH,EAAEC,OAAOC,SA0B9B,OACE,6BACE,wDACA,0BAAMe,SAlBV,SAAgBjB,GACdA,EAAEkB,iBAEF,IAAIV,EAAK,IAAIC,SAEb,IAAI,IAAIzI,KAAOwH,EAAU,CACvB,IAAIrH,EAAMqH,EAASxH,GACnBwI,EAAGE,OAAO1I,EAAKG,GAGjBd,EAAI4F,KAAK,qBAAsBuD,GAAItI,MAAK,SAAAoF,SAQtC,qBACK,2BAAO+C,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAAS5G,KAAMA,KAAK,SAAQ,6BADpF,qBAEK,2BAAOyH,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAAS7E,KAAM/B,KAAK,SAAQ,6BAFpF,qBAGK,2BAAOyH,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAAS5E,MAAOhC,KAAK,UAAS,6BAHtF,qBAIK,2BAAOyH,KAAK,OAAOC,SAAUP,EAAQQ,aAAcf,EAASI,SAAUhH,KAAK,aAAY,6BAJ5F,qBAKK,2BAAOyH,KAAK,OAAOC,SA9B5B,SAAmBN,GACjBP,EAAY,MACPD,EADM,CAET/E,IAAKuF,EAAEC,OAAOG,MAAM,OA2ByBxH,KAAK,QAAQ,6BACxD,mDC1CFuI,GAAkB9I,EAAa,sBAAC,sBAAA+I,EAAA,+EAC7B/J,EAAIkB,IAAI,aAAa8I,OAAM,WAEhC7H,EAAQC,KAAK,SAHqB,4CAQtC,SAAS6H,KAgBP,IAAI7I,EAAO0I,GAAgBrJ,OAAOY,KAElC,OACE,6BACGD,GACC,qBAAQA,EAAKE,OAMNE,oBAAW,SAASC,GAAO,4CAIxC,sBAAAsI,EAAA,sEACQ/J,EAAIkB,IAAI,WADhB,OAEE4I,GAAgBtJ,aAChBiB,EAAMU,QAAQC,KAAK,KAHrB,4CAJwC,sBAUxC,OARAsD,QAAQC,IAAI,iBAAkBxD,GAAWV,EAAMU,SAS7C,6BACE,kBAAC,WAAD,CAAUF,SAAU,4CAClB,kBAACgI,GAAD,OAEF,6BACE,4BACE,4BACE,kBAAC,IAAD,CAAMP,GAAG,SAAT,6BAEF,4BACE,kBAAC,IAAD,CAAMA,GAAG,QAAT,6BAEF,4BACE,kBAAC,IAAD,CAAMA,GAAG,QAAT,6BAEF,4BACE,4BAAQxH,QA3BsB,4CA2B9B,mBAKN,8BACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOoE,KAAK,gCAAgC4D,UAAWzC,IACvD,kBAAC,IAAD,CAAOnB,KAAK,+BAA+B4D,UAAWZ,IACtD,kBAAC,IAAD,CAAOhD,KAAK,+BAA+B4D,UAAWC,IACtD,kBAAC,IAAD,CAAO7D,KAAK,mCAAmC4D,UAAWP,WC7ErDnI,gBAAW,SAASC,GACjC,IAAI2I,EAAUC,mBACVC,EAAcD,mBACdE,EAAaF,mBAHuB,EAKZ3I,mBAAS,MALG,yEAcxC,WAAqBiH,GAArB,qBAAAoB,EAAA,6DACEpB,EAAEkB,iBAEEtI,EAAO6I,EAAQI,QAAQ3B,MACvB4B,EAAWH,EAAYE,QAAQ3B,MAC/B6B,EAAUH,EAAWC,QAAQ3B,MALnC,kBAQoB7I,EAAI4F,KAAK,SAAU,CAACrE,OAAMkJ,WAAUC,YARxD,OAQQzE,EARR,OASIxE,EAAMU,QAAQC,KAAd,sBAAkC6D,EAAI5E,KAAKiE,GAA3C,aATJ,kDAWIqF,MAAM,KAAEC,SAASvJ,KAAKwJ,KAX1B,2DAdwC,sBA8BxC,OACE,6BACE,0EACA,0BAAMjB,SAjC8B,6CAkClC,2BAAOZ,KAAK,OAAO8B,IAAKV,IACxB,2BAAOpB,KAAK,WAAW8B,IAAKR,IAC5B,2BAAOtB,KAAK,OAAO8B,IAAKP,IAExB,yBAAKpH,IAAI,eAAeE,IAAI,YAE5B,8CC1CRqC,QAAQC,IAAIvF,OAAOC,GAEJ,kBACb,OAAO,6BACL,6BACE,kBAAC,IAAD,CAAMqJ,GAAG,UAAT,gBACA,kBAAC,IAAD,CAAMA,GAAG,aAAT,mBCNS,YAASjI,GAGtB,OAFAiE,QAAQC,IAAIlE,GAGV,6BACE,wDACA,gDAAOA,EAAMsJ,SAAS9F,OAASxD,EAAMsJ,SAAS9F,MAAMjB,cC8B3CgH,OAhBf,WACE,OACE,kBAAC,IAAD,CAAQ7I,QAASA,GACf,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOmE,KAAK,IAAI2E,OAAK,EAACf,UAAWgB,KACjC,kBAAC,IAAD,CAAO5E,KAAK,yBAAyB4D,UAAWiB,IAChD,kBAAC,IAAD,CAAO7E,KAAK,0BAA0B4D,UAAWzF,IACjD,kBAAC,IAAD,CAAO6B,KAAK,+BAA+B4D,UAAWkB,KAEtD,kBAAC,IAAD,CAAO9E,KAAK,2BAA2B4D,UAAWmB,KAClD,kBAAC,IAAD,CAAO/E,KAAK,SAAS4D,UAAWoB,QCrBpBC,QACW,cAA7BnL,OAAO2K,SAASS,UAEe,UAA7BpL,OAAO2K,SAASS,UAEhBpL,OAAO2K,SAASS,SAAS1J,MACvB,2DCXN2J,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SD0H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMlL,MAAK,SAAAmL,GACjCA,EAAaC,kB","file":"static/js/main.255521f5.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nvar api = axios.create({\r\n  baseURL: '/api',\r\n  // withCredentials: true,\r\n})\r\n\r\nexport default api\r\n","import api from './api'\r\nimport axios from 'axios'\r\nimport _ from 'lodash'\r\n\r\nwindow._ = _\r\nwindow.api = api\r\nwindow.axios = axios\r\n","\r\nexport default function(f) {\r\n  var cache = {}\r\n\r\n  return {\r\n    clearCache() {\r\n      cache = {}\r\n    },\r\n    read(...args) {\r\n      var key = args.join('|')\r\n\r\n      if (key in cache) {\r\n        return cache[key]\r\n      } else {\r\n        throw f(...args).then(val => {\r\n          cache[key] = val\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n","import React, { Suspense, useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport createFetcher from './create-fetcher'\r\nimport api from './api'\r\nimport './LandingPage.css'\r\n\r\nvar fetcher = createFetcher((did) => {\r\n  return api.get('/deskinfo?did=' + did)\r\n})\r\n\r\nfunction DeskInfo({did}) {\r\n  var info = fetcher.read(did).data\r\n\r\n  return (\r\n    <div>\r\n      <span>{info.title}</span>\r\n      -\r\n      <span>{info.name}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default withRouter(function(props) {\r\n  var [custom, setCustom] = useState(0)\r\n\r\n  var rid = props.match.params.rid\r\n  var did = props.match.params.did\r\n\r\n  function startOrder() {\r\n    props.history.push(`/r/${rid}/d/${did}/c/${custom}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"LandingPage\">\r\n      <Suspense fallback={<div>正在加载桌面信息...</div>}>\r\n        <DeskInfo did={did} />\r\n      </Suspense>\r\n      <h2>请选择人数</h2>\r\n      <ul className=\"custom-count\">\r\n        <li className={custom === 1 ? 'active' : null} onClick={() => setCustom(1)}>1</li>\r\n        <li className={custom === 2 ? 'active' : null} onClick={() => setCustom(2)}>2</li>\r\n        <li className={custom === 3 ? 'active' : null} onClick={() => setCustom(3)}>3</li>\r\n        <li className={custom === 4 ? 'active' : null} onClick={() => setCustom(4)}>4</li>\r\n      </ul>\r\n\r\n      <button onClick={startOrder}>开始点餐</button>\r\n    </div>\r\n  )\r\n})\r\n","import { createHashHistory } from 'history'\r\n\r\nconst history = createHashHistory()\r\n\r\nexport default history\r\n","import React, { Component, useState, Suspense, useEffect } from 'react'\r\nimport { withRouter, useHistory, useParams } from 'react-router-dom'\r\nimport createFetcher from './create-fetcher'\r\nimport PropTypes from 'prop-types'\r\nimport api from './api'\r\nimport { produce } from 'immer'\r\nimport history from './history'\r\nimport io from 'socket.io-client'\r\nimport { thisExpression } from '@babel/types'\r\n\r\n\r\nvar imgStyle = {\r\n  float: 'left',\r\n  width: '100px',\r\n  height: '100px',\r\n  border: '2px solid',\r\n}\r\n\r\nvar menuItemStyle = {\r\n  border: '2px solid',\r\n  padding: '5px',\r\n  margin: '5px',\r\n}\r\n\r\nfunction MenuItem({food, onUpdate, amount}) {\r\n  // var [count, setCount] = useState(amount)\r\n\r\n  function dec() {\r\n    if (amount === 0) {\r\n      return\r\n    }\r\n    // setCount(count - 1)\r\n    onUpdate(food, amount - 1)\r\n  }\r\n\r\n  function inc() {\r\n    // setCount(count + 1)\r\n    onUpdate(food, amount + 1)\r\n  }\r\n\r\n  return (\r\n    <div style={menuItemStyle}>\r\n      <h3>{food.name}</h3>\r\n      <div>\r\n        <img style={imgStyle} src={'http://localhost:5002/upload/' + food.img} alt={food.name}/>\r\n        <p>{food.desc}</p>\r\n        <p>{food.price}</p>\r\n      </div>\r\n      <div>\r\n        <button onClick={dec}>-</button>\r\n        <span>{amount}</span>\r\n        <button onClick={inc}>+</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nMenuItem.propTypes = {\r\n  food: PropTypes.object.isRequired,\r\n  onUpdate: PropTypes.func,\r\n}\r\n\r\nMenuItem.defaultProps = {\r\n  onUpdate: () => {},\r\n}\r\n\r\n\r\nfunction calcTotalPrice(cartAry) {\r\n  return cartAry.reduce((total, item) => {\r\n    return total + item.amount * item.food.price\r\n  }, 0)\r\n}\r\n\r\n/**\r\n * foods：购物车信息\r\n * onUpdate事件：用户修改菜品数量时触发\r\n * onPlaceOrder事件：用户点击下单时触发\r\n */\r\nfunction CartStatus(props) {\r\n  var [expand, setExpand] = useState(false)\r\n\r\n  var totalPrice = calcTotalPrice(props.foods)\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      height: '50px',\r\n      bottom: '5px',\r\n      border: '2px solid',\r\n      left: '5px',\r\n      right: '5px',\r\n      backgroundColor: 'pink',\r\n    }}>\r\n      {expand ?\r\n        <button onClick={() => setExpand(false)}>收起</button> :\r\n        <button onClick={() => setExpand(true)}>展开</button>\r\n      }\r\n      <strong>总价：{totalPrice}</strong>\r\n\r\n      <button onClick={() => props.onPlaceOrder()}>下单</button>\r\n    </div>\r\n  )\r\n}\r\n\r\n// export default () => {\r\n//   return (\r\n//     <Suspense fallback={<div>loading...</div>}>\r\n//       <FoodCart/>\r\n//     </Suspense>\r\n//   )\r\n// }\r\n\r\n\r\nexport default class FoodCart extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      cart: [],\r\n      foodMenu: [],\r\n      deskInfo: {},\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var params = this.props.match.params\r\n\r\n    api.get('/deskinfo?did=' + params.did).then(val => {\r\n      this.setState({\r\n        deskInfo: val.data,\r\n      })\r\n    })\r\n\r\n    api.get('/menu/restaurant/1').then(res => {\r\n      this.setState({\r\n        foodMenu: res.data,\r\n      })\r\n    })\r\n\r\n\r\n    this.socket = io({\r\n      path: '/desk',\r\n      query: {\r\n        desk: 'desk:' + params.did\r\n      }\r\n    })\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('connect on')\r\n      this.socket.emit('join desk', 'desk:' + params.did)\r\n    })\r\n\r\n\r\n\r\n    // 后端发回此桌面已点菜单\r\n    this.socket.on('cart food', info => {\r\n      console.log('cart init', info)\r\n      this.setState(produce(state => {\r\n        state.cart.push(...info)\r\n      }))\r\n    })\r\n\r\n    // 来自同桌其它用户新增的菜单\r\n    this.socket.on('new food', info => {\r\n\r\n      console.log(info)\r\n      this.foodChange(info.food, info.amount)\r\n    })\r\n\r\n    this.socket.on('placeorder success', order => {\r\n      history.push({\r\n        pathname: `/r/${params.rid}/d/${params.did}/order-success`,\r\n        state: order,\r\n      })\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.close()\r\n  }\r\n\r\n  cartChange = (food, amount) => {\r\n    var params = this.props.match.params\r\n    this.socket.emit('new food', {desk: 'desk:' + params.did, food, amount})\r\n  }\r\n\r\n  foodChange = (food, amount) => {\r\n    var updated = produce(this.state.cart, cart => {\r\n      var idx = cart.findIndex(it => it.food.id === food.id)\r\n\r\n      if (idx >= 0) {\r\n        if (amount === 0) {\r\n          cart.splice(idx, 1)\r\n        } else {\r\n          cart[idx].amount = amount\r\n        }\r\n      } else {\r\n        cart.push({\r\n          food,\r\n          amount,\r\n        })\r\n      }\r\n    })\r\n    this.setState({cart: updated})\r\n  }\r\n\r\n  placeOrder = () => {\r\n    console.log('下单')\r\n    var params = this.props.match.params\r\n    // {\r\n    //   deskName:\r\n    //   customCount:\r\n    //   totalPrice:\r\n    //   foods: [{id, amount}, {}, {}]\r\n    // }\r\n    console.log(params)\r\n    api.post(`/restaurant/${params.rid}/desk/${params.did}/order`, {\r\n      deskName: this.state.deskInfo.name,\r\n      customCount: params.count,\r\n      totalPrice: calcTotalPrice(this.state.cart),\r\n      foods: this.state.cart,\r\n    }).then(res => {\r\n      history.push({\r\n        pathname: `/r/${params.rid}/d/${params.did}/order-success`,\r\n        state: res.data,\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          {\r\n            this.state.foodMenu.map(food => {\r\n\r\n              var currentAmount = 0\r\n              var currFoodCartItem = this.state.cart.find(cartItem => cartItem.food.id === food.id)\r\n              if (currFoodCartItem) {\r\n                currentAmount = currFoodCartItem.amount\r\n              }\r\n\r\n              return <MenuItem key={food.id} food={food} amount={currentAmount} onUpdate={this.cartChange}/>\r\n            })\r\n          }\r\n        </div>\r\n        <CartStatus foods={this.state.cart} onUpdate={this.cartChange} onPlaceOrder={this.placeOrder}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n/*\r\n\r\nfunction FoodCart(props){\r\n  var params = useParams()\r\n\r\n  var [deskInfo, setDeskInfo] = useState(null)\r\n\r\n  var foods = menuFetcher.read().data\r\n  var [cart, setCart] = useState([])\r\n\r\n  useEffect(() => {\r\n    api.get('/deskinfo?did=' + params.did).then(val => {\r\n      setDeskInfo(val.data)\r\n    })\r\n  }, [])\r\n\r\n  function foodChange(food, amount) {\r\n    var updated = produce(cart, cart => {\r\n      \r\n      var idx = cart.findIndex(it => it.food.id === food.id)\r\n\r\n      if (idx >= 0) {\r\n        if (amount === 0) {\r\n          cart.splice(idx, 1)\r\n        } else {\r\n          cart[idx].amount = amount\r\n        }\r\n      } else {\r\n        cart.push({\r\n          food,\r\n          amount,\r\n        })\r\n      }\r\n    })\r\n    setCart(updated)\r\n  }\r\n\r\n  function placeOrder() {\r\n    console.log('下单')\r\n    // {\r\n    //   deskName:\r\n    //   customCount:\r\n    //   totalPrice:\r\n    //   foods: [{id, amount}, {}, {}]\r\n    // }\r\n    console.log(params)\r\n    api.post(`/restaurant/${params.rid}/desk/${params.did}/order`, {\r\n      deskName: deskInfo.name,\r\n      customCount: params.count,\r\n      totalPrice: calcTotalPrice(cart),\r\n      foods: cart,\r\n    }).then(res => {\r\n      history.push({\r\n        pathname: `/r/${params.rid}/d/${params.did}/order-success`,\r\n        state: res.data,\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {\r\n          foods.map(food => {\r\n            return <MenuItem key={food.id} food={food} onUpdate={foodChange}/>\r\n          })\r\n        }\r\n      </div>\r\n      <CartStatus foods={cart} onUpdate={foodChange} onPlaceOrder={placeOrder}/>\r\n    </div>\r\n  )\r\n}\r\n\r\n*/","import React, { Component, useState, useEffect, useCallback } from 'react'\r\nimport io from 'socket.io-client'\r\nimport api from './api'\r\nimport { produce } from 'immer'\r\n\r\nvar orderItemStyle = {\r\n  border: '2px solid',\r\n  margin: '5px',\r\n  padding: '5px',\r\n}\r\n\r\nfunction OrderItem({order, onDelete}) {\r\n\r\n  var [orderInfo, setOrder] = useState(order)\r\n\r\n  function setConfirm() {\r\n    api.put(`/restaurant/1/order/${order.id}/status`, {\r\n      status: 'confirmed'\r\n    }).then(() => {\r\n      setOrder({\r\n        ...orderInfo,\r\n        status: 'confirmed'\r\n      })\r\n    })\r\n  }\r\n\r\n  function setComplete() {\r\n    api.put(`/restaurant/1/order/${order.id}/status`, {\r\n      status: 'completed'\r\n    }).then(() => {\r\n      setOrder({\r\n        ...orderInfo,\r\n        status: 'completed'\r\n      })\r\n    })\r\n  }\r\n\r\n  function deleteOrder() {\r\n    api.delete(`/restaurant/1/order/${order.id}`).then(() => {\r\n      onDelete(order)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div style={orderItemStyle}>\r\n      <h2>{orderInfo.deskName}</h2>\r\n      <h3>总价格：{orderInfo.totalPrice}</h3>\r\n      <h3>人数：{orderInfo.customCount}</h3>\r\n      <h3>订单状态：{orderInfo.status}</h3>\r\n      <div>\r\n        <button>打印</button>\r\n        <button onClick={setConfirm}>确认</button>\r\n        <button onClick={setComplete}>完成</button>\r\n        <button onClick={deleteOrder}>删除</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default class OrderManage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      orders: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var params = this.props.match.params\r\n\r\n    this.socket = io({\r\n      path: '/restaurant',\r\n      query: {\r\n        restaurant: 'restaurant:' + params.rid\r\n      }\r\n    })\r\n\r\n    this.socket.on('connect', () => {\r\n      this.socket.emit('join restaurant', 'restaurant:' + params.rid)\r\n    })\r\n\r\n    this.socket.on('new order', order => {\r\n      this.setState(produce(state => {\r\n        state.orders.unshift(order)\r\n      }))\r\n    })\r\n\r\n    api.get('/restaurant/1/order').then(res => {\r\n      this.setState(produce(state => {\r\n        state.orders = res.data\r\n      }))\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.close()\r\n  }\r\n\r\n  onDelete = (order) => {\r\n    var idx = this.state.orders.findIndex(it => it.id === order.id)\r\n\r\n    this.setState(produce(state => {\r\n      state.orders.splice(idx, 1)\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>订单管理</h2>\r\n        <div>\r\n          {this.state.orders.length > 0 ?\r\n            this.state.orders.map(order => {\r\n              return <OrderItem onDelete={this.onDelete} key={order.id} order={order} />\r\n            })\r\n            :\r\n            <div>loading...</div>\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport api from './api'\r\n\r\n\r\nvar imgStyle = {\r\n  float: 'left',\r\n  border: '1px solid',\r\n  width: '100px',\r\n  height: '100px',\r\n  objectFit: 'cover',\r\n}\r\nvar foodInfoStyle = {\r\n  overflow: 'hidden',\r\n}\r\nvar cardStyle = {\r\n  border: '2px solid',\r\n  padding: '5px',\r\n  margin: '5px',\r\n}\r\n\r\nfunction FoodItem({food, onDelete}) {\r\n  var [foodInfo, setFoodInfo] = useState(food)\r\n  var [isModify, setIsModify] = useState(false)\r\n  var [foodProps, setFoodProps] = useState({\r\n    name: food.name,\r\n    desc: food.desc,\r\n    price: food.price,\r\n    category: food.category,\r\n    status: food.status,\r\n    img: null,\r\n  })\r\n\r\n\r\n  function save() {\r\n    var fd = new FormData()\r\n\r\n    for(var key in foodProps) {\r\n      var val = foodProps[key]\r\n      fd.append(key, val)\r\n    }\r\n\r\n    api.put('/restaurant/1/food/' + food.id, fd).then((foodInfo) => {\r\n      setIsModify(false)\r\n      setFoodInfo(foodInfo.data)\r\n    })\r\n  }\r\n\r\n  function change(e) {\r\n    setFoodProps({\r\n      ...foodProps,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  function imgChange(e) {\r\n    setFoodProps({\r\n      ...foodProps,\r\n      img: e.target.files[0],\r\n    })\r\n  }\r\n\r\n  function deleteFood() {\r\n    api.delete('/restaurant/1/food/' + food.id).then(() => {\r\n      onDelete(food.id)\r\n    })\r\n  }\r\n\r\n  function setOnline() {\r\n    api.put('/restaurant/1/food/' + food.id, {\r\n      ...foodProps,\r\n      status: 'on',\r\n    }).then(res => {\r\n      setFoodInfo(res.data)\r\n    })\r\n  }\r\n  function setOffline() {\r\n    api.put('/restaurant/1/food/' + food.id, {\r\n      ...foodProps,\r\n      status: 'off',\r\n    }).then(res => {\r\n      setFoodInfo(res.data)\r\n    })\r\n  }\r\n\r\n  function getContent() {\r\n    if (isModify) {\r\n      return (\r\n        <div>\r\n          <form>\r\n            名称：<input type=\"text\" onChange={change} defaultValue={foodInfo.name} name=\"name\"/><br/>\r\n            描述：<input type=\"text\" onChange={change} defaultValue={foodInfo.desc} name=\"desc\"/><br/>\r\n            价格：<input type=\"text\" onChange={change} defaultValue={foodInfo.price} name=\"price\"/><br/>\r\n            分类：<input type=\"text\" onChange={change} defaultValue={foodInfo.category} name=\"category\"/><br/>\r\n            图片：<input type=\"file\" onChange={imgChange} name=\"img\" />\r\n          </form>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div style={foodInfoStyle}>\r\n          <img src={'http://localhost:5002/upload/' + foodInfo.img} alt={foodInfo.name} style={imgStyle} />\r\n          <p>描述：{foodInfo.desc}</p>\r\n          <p>价格：{foodInfo.price}</p>\r\n          <p>分类：{foodInfo.category ? foodInfo.category : '[暂未分类]'}</p>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div style={cardStyle}>\r\n      <h3>{foodInfo.name}</h3>\r\n      {getContent()}\r\n      <div>\r\n        <button onClick={() => setIsModify(true)}>修改</button>\r\n\r\n        <button onClick={save}>保存</button>\r\n\r\n        {foodInfo.status === 'on' &&\r\n          <button onClick={setOffline}>下架</button>\r\n        }\r\n        {foodInfo.status === 'off' &&\r\n          <button onClick={setOnline}>上架</button>\r\n        }\r\n        <button onClick={deleteFood}>删除</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default function FoodManage() {\r\n  var [foods, setFoods] = useState([])\r\n\r\n  useEffect(() => {\r\n    api.get('/restaurant/1/food').then(res => {\r\n      setFoods(res.data)\r\n    })\r\n  }, [])\r\n\r\n  console.log(foods)\r\n\r\n  function onDelete(id) {\r\n    setFoods(foods.filter(it => it.id !== id))\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Link to=\"/manage/add-food\">添加菜品</Link>\r\n      <div>\r\n        {\r\n          foods.map(food => {\r\n            return <FoodItem onDelete={onDelete} key={food.id} food={food}/>\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react'\r\n\r\nexport default function(){\r\n  return <div>desk manage</div>\r\n}","import React, {useState} from 'react'\r\nimport api from './api'\r\nimport history from './history'\r\n\r\nfunction AddFood(props) {\r\n  var [foodInfo, setFoodInfo] = useState({\r\n    name: '',\r\n    desc: '',\r\n    price: 0,\r\n    category: '',\r\n    status: 'on',\r\n    img: null,\r\n  })\r\n\r\n  function change(e) {\r\n    setFoodInfo({\r\n      ...foodInfo,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  function imgChange(e) {\r\n    setFoodInfo({\r\n      ...foodInfo,\r\n      img: e.target.files[0],\r\n    })\r\n  }\r\n\r\n  function submit(e) {\r\n    e.preventDefault()\r\n\r\n    var fd = new FormData()\r\n    \r\n    for(var key in foodInfo) {\r\n      var val = foodInfo[key]\r\n      fd.append(key, val)\r\n    }\r\n\r\n    api.post('/restaurant/1/food', fd).then(res => {\r\n      // history.goBack()\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>添加菜品</h2>\r\n      <form onSubmit={submit}>\r\n        名称：<input type=\"text\" onChange={change} defaultValue={foodInfo.name} name=\"name\"/><br/>\r\n        描述：<input type=\"text\" onChange={change} defaultValue={foodInfo.desc} name=\"desc\"/><br/>\r\n        价格：<input type=\"text\" onChange={change} defaultValue={foodInfo.price} name=\"price\"/><br/>\r\n        分类：<input type=\"text\" onChange={change} defaultValue={foodInfo.category} name=\"category\"/><br/>\r\n        图片：<input type=\"file\" onChange={imgChange} name=\"img\" /><br/>\r\n        <button>提交</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddFood","import React, { Suspense, useEffect, useState } from 'react'\r\nimport { Switch, Link, Route, withRouter, useHistory } from 'react-router-dom'\r\nimport OrderManage from './OrderManage'\r\nimport FoodManage from './FoodManage'\r\nimport DeskManage from './DeskManage'\r\nimport AddFood from './AddFood'\r\nimport api from './api'\r\nimport createFetcher from './create-fetcher'\r\nimport history from './history'\r\n\r\nconst userInfoFetcher = createFetcher(async () => {\r\n  return api.get('/userinfo').catch(() => {\r\n    // window.history.hash = '/'\r\n    history.push('/')\r\n  })\r\n})\r\n\r\n\r\nfunction RestaurantInfo() {\r\n  // var history = useHistory()\r\n  // var [info, setInfo] = useState(null)\r\n\r\n  // useEffect(() => {\r\n  //   (async () => {\r\n  //     try {\r\n  //       let response = await api.get('/userinfo')\r\n  //       console.log(response)\r\n  //       setInfo(response.data)\r\n  //     } catch(e) {\r\n  //       history.push('/')\r\n  //     }\r\n  //   })()\r\n  // }, [history])\r\n\r\n  var info = userInfoFetcher.read().data\r\n  \r\n  return (\r\n    <div>\r\n      {info &&\r\n        '欢迎：' + info.title\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(function(props) {\r\n\r\n  console.log('==============', history == props.history)\r\n\r\n  async function logout() {\r\n    await api.get('/logout')\r\n    userInfoFetcher.clearCache()\r\n    props.history.push('/')\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Suspense fallback={<div>loading...</div>}>\r\n        <RestaurantInfo />\r\n      </Suspense>\r\n      <nav>\r\n        <ul>\r\n          <li>\r\n            <Link to=\"order\">订单管理</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"food\">菜品管理</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"desk\">桌面管理</Link>\r\n          </li>\r\n          <li>\r\n            <button onClick={logout}>退出</button>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n\r\n      <main>\r\n        <Switch>\r\n          <Route path=\"/restaurant/:rid/manage/order\" component={OrderManage}/>\r\n          <Route path=\"/restaurant/:rid/manage/food\" component={FoodManage}/>\r\n          <Route path=\"/restaurant/:rid/manage/desk\" component={DeskManage}/>\r\n          <Route path=\"/restaurant/:rid/manage/add-food\" component={AddFood}/>\r\n        </Switch>\r\n      </main>\r\n    </div>\r\n  )\r\n})\r\n","import React, { useRef, useEffect, useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport api from './api'\r\nimport Axios from 'axios'\r\n\r\nexport default withRouter(function(props) {\r\n  var nameRef = useRef()\r\n  var passwordRef = useRef()\r\n  var captchaRef = useRef()\r\n\r\n  var [captcha, setCaptcha] = useState(null)\r\n\r\n  // useEffect(() => {\r\n  //   api.get('/captcha').then(res => {\r\n  //     console.log(res.data)\r\n  //     setCaptcha('data:image/svg+xml;base64,' + btoa(res.data))\r\n  //   })\r\n  // }, [])\r\n\r\n  async function login(e) {\r\n    e.preventDefault()\r\n\r\n    var name = nameRef.current.value\r\n    var password = passwordRef.current.value\r\n    var captcha = captchaRef.current.value\r\n\r\n    try {\r\n      var res = await api.post('/login', {name, password, captcha})\r\n      props.history.push(`/restaurant/${res.data.id}/manage/`)\r\n    } catch(e) {\r\n      alert(e.response.data.msg)\r\n    }\r\n\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>餐厅管理员登陆</h2>\r\n      <form onSubmit={login}>\r\n        <input type=\"text\" ref={nameRef}/>\r\n        <input type=\"password\" ref={passwordRef}/>\r\n        <input type=\"text\" ref={captchaRef}/>\r\n\r\n        <img src=\"/api/captcha\" alt=\"captcha\"/>\r\n        {/* <img src={captcha} alt=\"captcha\"/> */}\r\n        <button>Login</button>\r\n      </form>\r\n    </div>\r\n  )\r\n})\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconsole.log(window._)\r\n\r\nexport default function(){\r\n  return <div>\r\n    <div>\r\n      <Link to=\"/login\">登陆</Link>\r\n      <Link to=\"/register\">注册</Link>\r\n    </div>\r\n  </div>\r\n}","import React from \"react\";\r\n\r\n\r\nexport default function(props) {\r\n  console.log(props)\r\n\r\n  return (\r\n    <div>\r\n      <h2>下单成功</h2>\r\n      <p>总价：{props.location.state && props.location.state.totalPrice}</p>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\nimport './App.css';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport LandingPage from './LandingPage';\nimport FoodCart from './FoodCart';\nimport RestaurantManage from './RestaurantManage';\nimport Login from './Login';\nimport HomePage from './HomePage'\nimport OrderSuccess from './OrderSuccess'\nimport history from './history'\n\n// 用户侧\n// 扫码进入的页面，选择人数：/landing/restaurant/35/desk/20\n// 点餐页面：               /restaurant/35/desk/20\n// 点餐成功页面：           /\n\n// 商户侧\n// 登陆\n// 订单管理：    /manage/order\n// 订单详情：    /manage/order/35\n// 菜品管理：    /manage/food\n// 桌面管理：    /manage/desk\n\nfunction App() {\n  return (\n    <Router history={history}>\n      <Switch>\n        <Route path=\"/\" exact component={HomePage} />\n        <Route path=\"/landing/r/:rid/d/:did\" component={LandingPage} />\n        <Route path=\"/r/:rid/d/:did/c/:count\" component={FoodCart} />\n        <Route path=\"/r/:rid/d/:did/order-success\" component={OrderSuccess} />\n\n        <Route path=\"/restaurant/:rid/manage/\" component={RestaurantManage} />\n        <Route path=\"/login\" component={Login} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './set-global'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}